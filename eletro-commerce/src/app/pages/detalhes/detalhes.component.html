
<div class="container">

    <mat-card class="card" *ngIf="produto">
        <mat-card-title class="title">Detalhes do {{ produto.nome }}</mat-card-title>
        <mat-card-content class="content">
        <form [formGroup]="form" class="form" (ngSubmit)="salvar()">
            <div class="divisor">
                <mat-form-field class="bigField">
                    <mat-label>Nome</mat-label>
                    <input type="text" matInput formControlName="nome">
                </mat-form-field>
    
                <mat-form-field class="bigField">
                    <mat-label>Descricao</mat-label>
                    <input type="text" matInput formControlName="descricao">
                </mat-form-field>

                <mat-form-field class="smallField">
                    <mat-label>Preço</mat-label>
                    <input type="number" step="0.01" matInput formControlName="preco" (change)="autoCompletePromocao()">
                    <mat-hint>Ex: 50.00</mat-hint>
                </mat-form-field>
            </div>
            <div class="divisor">
                <mat-form-field class="smallField">
                    <mat-label>Estoque</mat-label>
                    <input type="number" matInput formControlName="estoque">
                </mat-form-field> 

                <span class="toggle">
                    <mat-label>Promoção?</mat-label>
                    <mat-slide-toggle formControlName="promocao" (change)="changePromocao()"></mat-slide-toggle>
                </span>

                <mat-form-field class="smallField" style="width: 13%">
                    <mat-label>OFF</mat-label>
                    <input type="text" matInput formControlName="off" maxlength="2" (change)="autoCompletePromocao()">
                    <mat-icon matSuffix>percent</mat-icon>
                    <mat-hint>50</mat-hint>
                </mat-form-field>

                <mat-form-field class="smallField">
                    <mat-label>Preço Promoção</mat-label>
                    <input type="number" step="0.01" matInput formControlName="precoPromocao">
                    <mat-hint>Ex: 49.99</mat-hint>
                </mat-form-field>

                <mat-form-field appearance="fill" class="smallField">
                    <mat-label>Categorias</mat-label>
                    <mat-select formControlName="categoria">
                      <mat-option *ngFor="let c of categorias" [value]="c.value">
                        {{c.nome}}
                      </mat-option>
                    </mat-select>
                </mat-form-field>

            </div>

            <div class="divisor btnContainer" style="margin-top: 20%;">
                <button mat-raised-button color="accent" routerLink="/imagens/{{ produto.id }}" type="button">Imagens</button>
                <button mat-raised-button color="warn" type="button" (click)="excluir()">Excluir</button>
                <button mat-raised-button color="primary" type="button" routerLink="/controle">Voltar</button>
                <button mat-raised-button class="sucess" type="submit">Salvar</button>
            </div>
        </form>
        </mat-card-content>
    </mat-card>

</div>
